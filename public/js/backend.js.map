{"version":3,"sources":["backend.js","countdown.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"backend.js","sourcesContent":["/**\n * Created by roman on 29.06.16.\n */\n$(document).ready(function () {\n    /**\n     * Инициализация всех тултипов\n     */\n    $('[data-toggle=\"tooltip\"]').tooltip();\n    var $CkEditor = $('[data-toggle=\"ckeditor\"]');\n    for (var i = $CkEditor.length; i--;) {\n        /* Маленькая инициализационная область для CKEditor */\n        var name = $CkEditor.eq(i).attr('name');\n        var id = $CkEditor.eq(i).attr('id');\n\n        var errMessage = false;\n        if (name == undefined) {\n             errMessage = 'Не задан атрибут name!';\n        }\n\n        if (id == undefined) {\n            errMessage += ' Не задан атрибут id!';\n        }\n\n        if (CKEDITOR == undefined) {\n            errMessage += 'Не определен CkEditor';\n        }\n\n        if (errMessage) {\n            errMessage += ' Для элемента '+$CkEditor.eq(i)[0];\n            console.log(errMessage);\n            continue;\n        }\n\n        /* Если же все условия выполнены для замечательной работы CKEditor инициализируем его */\n        CKEDITOR.replace(id);\n    }\n\n    //$('[data-toggle=\"buttons\"]').\n    $('[data-toggle=\"countdown\"]').countdown();\n});","/**\n * Created by roman on 29.06.16.\n */\n+function ($) {\n    'use strict';\n\n    var CountdownElemForm = function (element, options) {\n        this.$element = $(element);\n        this.CurrentOption = this.getOptions (options);\n        this.$form = this.$element.closest('form');\n        this.intervalId = null;\n        this.countdownState = 'start';\n        this.innerHtml = null;\n\n        var self = this;\n        this.$form.bind('submit.countdown', function () {\n            return self.sendForm();\n        });\n\n        this.$element.bind('click.countdown', function () {\n            if (self.countdownState == 'start') {\n                self.countdownState = 'proccess';\n                self.innerHtml = self.$element.html();\n                self.$element.html(self.CurrentOption.countdownTime);\n                self.intervalId = setInterval(function () {\n                    self.action.call(self);\n                }, self.CurrentOption.countdownIntervalSec*1000);\n            }\n\n            if (self.countdownState == 'end') {\n                return true;\n            }\n            return false;\n        });\n    };\n\n    /**\n     * Сам непосредственный экшн для отсчета\n     */\n    CountdownElemForm.prototype.action = function () {\n        var time = parseInt(this.$element.html());\n        if (time > 0) {\n            time--;\n            this.$element.html(time);\n        } else {\n            this.$element.html(this.innerHtml);\n            this.countdownState = 'end';\n            clearInterval(this.intervalId);\n        }\n    }\n\n    /**\n     * Разршаем отправку формы тогда и только тогда, когда\n     * заканчивается обратный отсчет, до этого форму не отрпавляем\n     * @returns {boolean}\n     */\n    CountdownElemForm.prototype.sendForm = function () {\n        if (this.countdownState !== 'end') {\n            return false;\n        }\n\n        return true;\n    }\n\n    CountdownElemForm.prototype.options = {\n        countdownTime: 3,\n        countdownIntervalSec: 1,\n    };\n\n    CountdownElemForm.prototype.getOptions = function (options) {\n        if (options && (typeof options) == 'Object') {\n            for (var key in this.options) {\n                if (!options[key]) {\n                    options[key] = this.options[key];\n                };\n            }\n\n            return options;\n        }\n\n        return this.options;\n    };\n\n    var Countdown = function (options) {\n        //вернуть надо объект jQuery\n        return this.each(function () {\n            new CountdownElemForm(this, options);\n        });\n    };\n\n\n    var old = $.fn.countdown;\n\n    $.fn.countdown = Countdown;\n    $.fn.countdown.constructor = Countdown;\n\n    $.fn.countdown.noConflict = function () {\n        $.fn.countdown = old;\n        return this;\n    }\n\n}(jQuery);"],"sourceRoot":"/source/"}